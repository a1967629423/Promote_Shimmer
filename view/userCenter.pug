extends ./base/login.pug

block header
    title 用户中心
    link(rel="stylesheet", href='https://unpkg.com/element-ui@2.11.0/lib/theme-chalk/index.css')
    link(rel="stylesheet", href=locals.webSideRootPath+"static/style/usercenter.css")
    script(src="https://cdn.jsdelivr.net/npm/vue")
    script(src="https://unpkg.com/element-ui@2.11.0/lib/index.js")
block append main 
    #app
        el-container
            el-header
                el-row(class="e-header")
                    el-col( :span="8")
                        .sidebar-active-btn
                            i(class="fa fa-navicon  fa-2x")
                    el-col( :span="8",class="text-col")
                        h1 用户填写记录
                    el-col( :span="8")
                        el-dropdown(@click.native="settingBtnClick",trigger="click")
                            i(class="fa fa-cog  fa-2x",:class="{'fa-spin-once':settingIconAnimation}")
                            el-dropdown-menu(slot="dropdown")
                                el-dropdown-item  查看
                                el-dropdown-item  查看
                                el-dropdown-item  查看
        el-main
                el-table( :data="visualData",height="70vh",stripe="true",border="true")
                    el-table-column(prop="date" label="日期",sortable)
                    el-table-column(prop="name" label="姓名",sortable)
                    el-table-column(prop="phoneNumber" label="手机号")
                .el-pagination-block
                    el-pagination(background,layout="prev,pager,next",:total="tableData.length",:page-size="pageSize",:current-page.sync="currentPage",@current-change="currentChange")
        el-footer(class="e-footer")
    script.
        #{isVendor?relation.map((user)=>{}):null}
        new Vue({
            el:'#app',
            data:function(){
                return {
                    tableData: Array(20).fill({}).map(function(v,i){
                        var item = {
                        
                        }
                        return item
                    }),
                    pageSize:10,
                    visualData:[],
                    currentPage:1,
                    settingIconAnimation:false
                }
            },
            methods:{
                currentChange:function()
                {
                    this.sliceData();
                },
                sliceData:function()
                {
                    this.visualData = this.tableData.slice(this.pageSize*(this.currentPage-1),this.pageSize*this.currentPage)
                },
                settingBtnClick:function()
                {
                    this.settingIconAnimation = true;
                    setTimeout(()=>{
                        this.settingIconAnimation = false;
                    },1000)
                }
            },
            created:function()
            {
                this.pageSize = Math.floor(window.innerHeight*0.7/50);
                this.sliceData();
            },
        })