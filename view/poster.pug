extends ./base/layout.pug

block header
    title 海报生成
block main
    .poster-container
        .editor-container
            canvas#editor
    script(src = "https://cdnjs.cloudflare.com/ajax/libs/three.js/107/three.min.js")
    script.
        $(function(){
            var editor = new PictureEditor($('#editor')[0]);
            (new THREE.TextureLoader).load('#{qr.url}',function(qrcode){
                editor.addImg(qrcode);
            });
            editor.on('pointDown',(clicked)=>{
                if(clicked.length>0)
                {
                    editor.removeImg(clicked[0].id);
                }
            })
        })