extends ./base/layout.pug

block header
    title 海报生成
block main
    .poster-container
        .editor-container
            .editor-warpper
                canvas#editor
        .editor-toolbox-container
            .editor-toolbox-head
                //-div(class="editor-toolbox-cell")
                    //- i(class="fa fa-angle-up fa-lg")
            .editor-toolbox-content
                div(class="editor-toolbox-warper hidden first")
                    //- div(class="editor-toolbox-cell layout")
                    //-     i(class = "fa fa-th-list fa-lg")
                    //-     div 图层
                    //- div(class="editor-toolbox-cell canvas")
                    //-     i(class = "fa fa-square-o fa-lg")
                    //-     div 画布
                    //- div(class="editor-toolbox-cell save")
                    //-     i(class = "fa fa-floppy-o fa-lg")
                    //-     div 保存
                div(class="editor-toolbox-warper hidden second")
                div(class="editor-toolbox-warper hidden third")
            

                

    script(src = "https://cdnjs.cloudflare.com/ajax/libs/three.js/107/three.min.js")
    script(src = locals.webSideRootPath+"static/script/editor.js")
    script.
        $(function(){
            var editor = new PictureEditor($('#editor')[0]);
            (new THREE.TextureLoader).load('#{qr.url}',function(qrcode){
                qrcode.magFilter = qrcode.minFilter = THREE.LinearFilter;
                editor.addImg(qrcode);
            });
            var toolbox = new ToolBox(editor);
            //- function test(clicked){
            //-     if(clicked.length>0)
            //-     {
            //-         editor.removeImg(clicked[0].id);
            //-     }
            //- }
            //- editor.on('pointDown',test);
            //- editor.off('pointDown',test);
        })